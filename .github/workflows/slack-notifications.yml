name: Slack Notifications

on:
  push:
    branches:
      - main
      - master
      - develop
      - tri
      - duy
      - bop
      - tuan
  pull_request:
    types: [opened, closed, reopened]

jobs:
  notify-slack:
    name: G·ª≠i th√¥ng b√°o ƒë·∫øn Slack
    runs-on: ubuntu-latest
    steps:
      - name: G·ª≠i th√¥ng b√°o Push
        if: github.event_name == 'push'
        uses: rtCamp/action-slack-notify@v2
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
        with:
          slack_message: |
            *Push Event*
            *${{ github.actor }}* v·ª´a push code l√™n nh√°nh <${{ github.event.compare }}|*${{ github.ref_name }}*>.
          slack_title: "üöÄ Push to ${{ github.repository }}"
          slack_color: '#24a0ed' 

      - name: G·ª≠i th√¥ng b√°o Pull Request ƒë√£ m·ªü
        if: github.event_name == 'pull_request' && github.event.action == 'opened'
        uses: rtCamp/action-slack-notify@v2
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
        with:
          slack_message: |
            *${{ github.actor }}* v·ª´a t·∫°o m·ªôt pull request m·ªõi:
            *<${{ github.event.pull_request.html_url }}|${{ github.event.pull_request.title }}>*
            *T·ª´ nh√°nh:* `${{ github.event.pull_request.head.ref }}`
            *V√†o nh√°nh:* `${{ github.event.pull_request.base.ref }}`
          slack_title: "üì• New Pull Request"
          slack_color: '#f2c744' 

      - name: G·ª≠i th√¥ng b√°o Pull Request ƒë√£ ƒë∆∞·ª£c Merge
        if: github.event.pull_request.merged == true
        uses: rtCamp/action-slack-notify@v2
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
        with:
          slack_message: |
            Pull request *<${{ github.event.pull_request.html_url }}|${{ github.event.pull_request.title }}>* ƒë√£ ƒë∆∞·ª£c merge b·ªüi *${{ github.actor }}*.
          slack_title: "‚úÖ Pull Request Merged"
          slack_color: '#32a852' 

      - name: G·ª≠i th√¥ng b√°o Pull Request ƒë√£ b·ªã ƒê√≥ng
        if: github.event_name == 'pull_request' && github.event.action == 'closed' && github.event.pull_request.merged == false
        uses: rtCamp/action-slack-notify@v2
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
        with:
          slack_message: |
            Pull request *<${{ github.event.pull_request.html_url }}|${{ github.event.pull_request.title }}>* ƒë√£ b·ªã ƒë√≥ng b·ªüi *${{ github.actor }}*.
          slack_title: "‚ùå Pull Request Closed"
          slack_color: '#d12f2f' 